<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LitWire - Influencer Onboarding</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f3f4f6; }
        .card { background-color: #fff; padding: 2rem; border-radius: 1.5rem; box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1), 0 4px 6px -2px rgba(0,0,0,0.05); }
        .input-field { width: 100%; padding: 0.75rem 1rem; border-radius: 0.5rem; border: 1px solid #d1d5db; transition: all 0.2s ease; }
        .input-field:focus { border-color: #2e598b; outline: none; box-shadow: 0 0 0 3px rgba(46, 89, 139, 0.2); }
        .btn { padding: 0.75rem 2.5rem; border-radius: 9999px; font-weight: 600; transition: all 0.3s ease; }
        .btn-primary { background-color: #2e598b; color: #fff; }
        .btn-primary:hover { background-color: #234368; }
        .btn-secondary { background-color: transparent; border: 2px solid #2e598b; color: #2e598b; }
        .btn-secondary:hover { background-color: #e5e7eb; }
        .step-container { display: none; }
        .step-container.active { display: block; }
        .aesthetic-option img { border-radius: 0.75rem; border: 3px solid transparent; transition: all 0.2s ease; }
        .aesthetic-option.selected img { border-color: #2e598b; box-shadow: 0 0 0 3px rgba(46, 89, 139, 0.5); }
    </style>
</head>
<body class="bg-gray-100 min-h-screen p-8 flex flex-col items-center">

    <main class="w-full flex flex-col lg:flex-row lg:space-x-8 max-w-7xl">

        <!-- Form Steps Card -->
        <div class="card flex-grow p-6 lg:p-10 mb-8 lg:mb-0">
            <header class="mb-8">
                <h1 class="text-3xl font-extrabold text-gray-900">Your LitWire Profile</h1>
                <p class="text-lg text-gray-600 mt-2">Let's build a profile that gets you matched with authors you'll love.</p>
            </header>

            <!-- Form element no longer needs the onsubmit attribute as we are handling the redirect on button click -->
            <form id="onboarding-form">
                <!-- Step 1: Profile Basics -->
                <div id="step-1" class="step-container active">
                    <h2 class="text-2xl font-bold mb-4">Step 1: The Basics</h2>
                    <div class="space-y-6">
                        <div>
                            <label for="handle" class="block text-sm font-medium text-gray-700 mb-2">Name or Handle</label>
                            <input type="text" id="handle" name="handle" class="input-field" placeholder="e.g., @bookish_dreamer" oninput="updatePreview()">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Profile Picture</label>
                            <div class="flex items-center space-x-4">
                                <div class="w-20 h-20 bg-gray-200 rounded-full flex items-center justify-center overflow-hidden">
                                    <i id="profile-pic-icon" class="fas fa-user text-3xl text-gray-400"></i>
                                    <img id="profile-pic-preview" src="#" alt="Profile Picture" class="hidden w-full h-full object-cover">
                                </div>
                                <input type="file" id="profile-pic" name="profilePic" class="hidden" accept="image/*" onchange="previewImage(event)">
                                <button type="button" onclick="document.getElementById('profile-pic').click()" class="btn btn-secondary text-sm">Upload Photo</button>
                            </div>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-4">Connected Platforms</label>
                            <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                                <div class="flex items-center space-x-2">
                                    <input type="checkbox" name="platform" value="tiktok" class="rounded-full text-blue-600 focus:ring-blue-500" onchange="updatePreview()">
                                    <i class="fab fa-tiktok text-xl text-gray-500"></i>
                                    <span>TikTok</span>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <input type="checkbox" name="platform" value="instagram" class="rounded-full text-blue-600 focus:ring-blue-500" onchange="updatePreview()">
                                    <i class="fab fa-instagram text-xl text-gray-500"></i>
                                    <span>Instagram</span>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <input type="checkbox" name="platform" value="youtube" class="rounded-full text-blue-600 focus:ring-blue-500" onchange="updatePreview()">
                                    <i class="fab fa-youtube text-xl text-gray-500"></i>
                                    <span>YouTube</span>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <input type="checkbox" name="platform" value="newsletter" class="rounded-full text-blue-600 focus:ring-blue-500" onchange="updatePreview()">
                                    <i class="fas fa-envelope text-xl text-gray-500"></i>
                                    <span>Newsletter</span>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <input type="checkbox" name="platform" value="blog" class="rounded-full text-blue-600 focus:ring-blue-500" onchange="updatePreview()">
                                    <i class="fas fa-blog text-xl text-gray-500"></i>
                                    <span>Blog</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 2: Discovery Filters -->
                <div id="step-2" class="step-container">
                    <h2 class="text-2xl font-bold mb-4">Step 2: Pick Your Vibe</h2>
                    <div class="space-y-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Genre & Subgenre</label>
                            <div class="flex flex-wrap gap-2">
                                <span class="bg-gray-200 text-gray-700 rounded-full px-3 py-1 text-sm cursor-pointer hover:bg-gray-300 transition-colors" data-genre="Fantasy" onclick="toggleTag(this, 'genre')">Fantasy</span>
                                <span class="bg-gray-200 text-gray-700 rounded-full px-3 py-1 text-sm cursor-pointer hover:bg-gray-300 transition-colors" data-genre="Romance" onclick="toggleTag(this, 'genre')">Romance</span>
                                <span class="bg-gray-200 text-gray-700 rounded-full px-3 py-1 text-sm cursor-pointer hover:bg-gray-300 transition-colors" data-genre="Sci-Fi" onclick="toggleTag(this, 'genre')">Sci-Fi</span>
                                <span class="bg-gray-200 text-gray-700 rounded-full px-3 py-1 text-sm cursor-pointer hover:bg-gray-300 transition-colors" data-genre="Thriller" onclick="toggleTag(this, 'genre')">Thriller</span>
                            </div>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Tropes & Spice Level</label>
                            <div class="flex flex-wrap gap-2 mb-4">
                                <span class="bg-gray-200 text-gray-700 rounded-full px-3 py-1 text-sm cursor-pointer hover:bg-gray-300 transition-colors" data-trope="Enemies-to-Lovers" onclick="toggleTag(this, 'trope')">Enemies-to-Lovers</span>
                                <span class="bg-gray-200 text-gray-700 rounded-full px-3 py-1 text-sm cursor-pointer hover:bg-gray-300 transition-colors" data-trope="Found Family" onclick="toggleTag(this, 'trope')">Found Family</span>
                                <span class="bg-gray-200 text-gray-700 rounded-full px-3 py-1 text-sm cursor-pointer hover:bg-gray-300 transition-colors" data-trope="Chosen One" onclick="toggleTag(this, 'trope')">Chosen One</span>
                            </div>
                            <div class="flex items-center space-x-4">
                                <span class="text-sm text-gray-500">Clean</span>
                                <input type="range" id="spice-level" name="spiceLevel" min="0" max="100" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer" oninput="updatePreview()">
                                <span class="text-sm text-gray-500">Spicy</span>
                            </div>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Aesthetic Selector</label>
                            <div class="grid grid-cols-2 sm:grid-cols-3 gap-4">
                                <div class="aesthetic-option cursor-pointer" onclick="selectAesthetic(this, 'Dark/Moody')">
                                    <img src="https://placehold.co/200x200/4a5568/fff?text=Dark/Moody" alt="Dark/Moody aesthetic">
                                    <p class="text-center text-sm mt-2">Dark/Moody</p>
                                </div>
                                <div class="aesthetic-option cursor-pointer" onclick="selectAesthetic(this, 'Pastel/Floral')">
                                    <img src="https://placehold.co/200x200/d5a9b7/fff?text=Pastel/Floral" alt="Pastel/Floral aesthetic">
                                    <p class="text-center text-sm mt-2">Pastel/Floral</p>
                                </div>
                                <div class="aesthetic-option cursor-pointer" onclick="selectAesthetic(this, 'Minimalist')">
                                    <img src="https://placehold.co/200x200/e5e7eb/7b7e85?text=Minimalist" alt="Minimalist aesthetic">
                                    <p class="text-center text-sm mt-2">Minimalist</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 3: Audience & Preferences -->
                <div id="step-3" class="step-container">
                    <h2 class="text-2xl font-bold mb-4">Step 3: Tell Us About Your Audience</h2>
                    <div class="space-y-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Audience Demographics</label>
                            <div class="flex flex-wrap gap-2">
                                <span class="bg-gray-200 text-gray-700 rounded-full px-3 py-1 text-sm cursor-pointer hover:bg-gray-300 transition-colors" data-demo="YA Readers" onclick="toggleTag(this, 'demographic')">YA Readers</span>
                                <span class="bg-gray-200 text-gray-700 rounded-full px-3 py-1 text-sm cursor-pointer hover:bg-gray-300 transition-colors" data-demo="LGBTQ+" onclick="toggleTag(this, 'demographic')">LGBTQ+</span>
                                <span class="bg-gray-200 text-gray-700 rounded-full px-3 py-1 text-sm cursor-pointer hover:bg-gray-300 transition-colors" data-demo="BIPOC" onclick="toggleTag(this, 'demographic')">BIPOC</span>
                            </div>
                        </div>
                        <div>
                            <label for="dealbreakers" class="block text-sm font-medium text-gray-700 mb-2">Dealbreakers (e.g., "I don't want pitches for...")</label>
                            <textarea id="dealbreakers" name="dealbreakers" rows="3" class="input-field" placeholder="e.g., 'mafia thrillers, erotica'" oninput="updatePreview()"></textarea>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Preferred Collab Style</label>
                            <div class="flex space-x-4">
                                <label class="flex items-center space-x-2 cursor-pointer">
                                    <input type="radio" name="collabStyle" value="Creative Freedom" class="text-blue-600 focus:ring-blue-500" checked onchange="updatePreview()">
                                    <span>Creative Freedom</span>
                                </label>
                                <label class="flex items-center space-x-2 cursor-pointer">
                                    <input type="radio" name="collabStyle" value="Structured Campaigns" class="text-blue-600 focus:ring-blue-500" onchange="updatePreview()">
                                    <span>Structured Campaigns</span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 4: Transparency & Communication -->
                <div id="step-4" class="step-container">
                    <h2 class="text-2xl font-bold mb-4">Step 4: Your Rules, Your Way</h2>
                    <div class="space-y-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Pitch Settings</label>
                            <div class="flex items-center space-x-2">
                                <input type="checkbox" id="pitch-setting" name="pitchSetting" class="rounded-full text-blue-600 focus:ring-blue-500" checked onchange="updatePreview()">
                                <span>Yes, authors can message me through platform only</span>
                            </div>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Visibility Settings</label>
                            <div class="flex flex-wrap gap-2">
                                <span class="bg-gray-200 text-gray-700 rounded-full px-3 py-1 text-sm cursor-pointer hover:bg-gray-300 transition-colors" data-visibility="Small Press" onclick="toggleTag(this, 'visibility')">Small Press</span>
                                <span class="bg-gray-200 text-gray-700 rounded-full px-3 py-1 text-sm cursor-pointer hover:bg-gray-300 transition-colors" data-visibility="Self-Published" onclick="toggleTag(this, 'visibility')">Self-Published</span>
                                <span class="bg-gray-200 text-gray-700 rounded-full px-3 py-1 text-sm cursor-pointer hover:bg-gray-300 transition-colors" data-visibility="Big 5 Publishers" onclick="toggleTag(this, 'visibility')">Big 5 Publishers</span>
                            </div>
                        </div>
                        <div>
                            <label for="preferences" class="block text-sm font-medium text-gray-700 mb-2">Additional Notes</label>
                            <textarea id="preferences" name="preferences" rows="3" class="input-field" placeholder="e.g., 'I prefer debut authors / indie presses / romance arcs.'" oninput="updatePreview()"></textarea>
                        </div>
                    </div>
                </div>

                <!-- Navigation Buttons -->
                <div class="flex justify-between mt-8">
                    <button type="button" id="back-btn" class="btn btn-secondary disabled:opacity-50" disabled>Back</button>
                    <button type="button" id="next-btn" class="btn btn-primary">Next</button>
                    <div id="final-ctas" class="hidden">
                        <!-- We now call a function directly on the button's click event for reliable redirection -->
                        <button type="button" id="preview-matches-btn" onclick="redirectToLanding()" class="btn btn-primary mr-2">Preview My Matches</button>
                        <button type="button" class="btn btn-secondary">Save & Finish Later</button>
                    </div>
                </div>
            </form>
        </div>

        <!-- Live Preview Sidebar -->
        <div class="card w-full lg:w-96 p-6 sticky top-8 h-fit hidden lg:block" id="preview-sidebar">
            <h3 class="text-xl font-bold mb-4">Your Collab Profile Card</h3>
            <div class="flex items-center space-x-4 mb-4">
                <div class="w-16 h-16 bg-gray-200 rounded-full flex items-center justify-center overflow-hidden">
                    <i id="preview-pic-icon" class="fas fa-user text-2xl text-gray-400"></i>
                    <img id="preview-pic" src="#" alt="Profile Picture" class="hidden w-full h-full object-cover">
                </div>
                <div>
                    <h4 id="preview-handle" class="font-bold text-gray-900 text-lg">Your Handle</h4>
                    <p class="text-sm text-gray-500">
                        <span id="preview-verified" class="bg-green-100 text-green-800 text-xs font-semibold px-2 py-0.5 rounded-full hidden">Verified <i class="fas fa-check-circle"></i></span>
                    </p>
                </div>
            </div>
            <div class="mb-4">
                <p class="font-semibold text-gray-700">Connected Platforms:</p>
                <div id="preview-platforms" class="flex space-x-2 text-xl mt-1"></div>
            </div>
            <div class="mb-4">
                <p class="font-semibold text-gray-700">Genres:</p>
                <div id="preview-genres" class="flex flex-wrap gap-1 mt-1"></div>
            </div>
            <div class="mb-4">
                <p class="font-semibold text-gray-700">Tropes:</p>
                <div id="preview-tropes" class="flex flex-wrap gap-1 mt-1"></div>
            </div>
            <div class="mb-4">
                <p class="font-semibold text-gray-700">Aesthetic:</p>
                <span id="preview-aesthetic" class="text-gray-600 italic">None selected</span>
            </div>
            <div class="mb-4">
                <p class="font-semibold text-gray-700">Dealbreakers:</p>
                <p id="preview-dealbreakers" class="text-gray-600 italic">None entered</p>
            </div>
        </div>
    </main>
    
    <script>
        // Data model
        let profileData = {
            handle: '',
            profilePic: '',
            platforms: [],
            genres: [],
            tropes: [],
            aesthetic: '',
            dealbreakers: '',
            collabStyle: 'Creative Freedom',
            visibility: []
        };
        
        let currentStep = 1;
        const totalSteps = 4;
        
        const form = document.getElementById('onboarding-form');
        const backBtn = document.getElementById('back-btn');
        const nextBtn = document.getElementById('next-btn');
        const finalCtas = document.getElementById('final-ctas');
        const previewSidebar = document.getElementById('preview-sidebar');

        // Function to handle the redirect
        function redirectToLanding() {
            window.location.href = 'loggedInLanding.html';
        }

        // Function to update the view
        function updateView() {
            document.querySelectorAll('.step-container').forEach(step => step.classList.remove('active'));
            document.getElementById(`step-${currentStep}`).classList.add('active');

            backBtn.disabled = currentStep === 1;
            nextBtn.style.display = currentStep === totalSteps ? 'none' : 'inline-block';
            finalCtas.style.display = currentStep === totalSteps ? 'block' : 'none';
        }

        // Function to update the live preview
        function updatePreview() {
            // Get data from form elements
            profileData.handle = document.getElementById('handle').value;
            profileData.dealbreakers = document.getElementById('dealbreakers').value;
            profileData.collabStyle = document.querySelector('input[name="collabStyle"]:checked')?.value || 'Creative Freedom';

            // Clear old values
            profileData.genres = [];
            profileData.tropes = [];
            profileData.platforms = [];
            profileData.visibility = [];

            // Populate from tags
            document.querySelectorAll('.bg-blue-100[data-genre]').forEach(tag => profileData.genres.push(tag.dataset.genre));
            document.querySelectorAll('.bg-blue-100[data-trope]').forEach(tag => profileData.tropes.push(tag.dataset.trope));
            document.querySelectorAll('.bg-blue-100[data-visibility]').forEach(tag => profileData.visibility.push(tag.dataset.visibility));

            // Populate from checkboxes
            document.querySelectorAll('input[name="platform"]:checked').forEach(cb => profileData.platforms.push(cb.value));

            // Populate Aesthetic
            const selectedAesthetic = document.querySelector('.aesthetic-option.selected');
            profileData.aesthetic = selectedAesthetic ? selectedAesthetic.dataset.aesthetic : '';

            // Update preview elements
            document.getElementById('preview-handle').textContent = profileData.handle || 'Your Handle';
            
            const genrePreview = document.getElementById('preview-genres');
            genrePreview.innerHTML = profileData.genres.map(g => `<span class="bg-blue-100 text-blue-800 text-xs font-medium px-2 py-0.5 rounded-full">${g}</span>`).join('');
            
            const tropePreview = document.getElementById('preview-tropes');
            tropePreview.innerHTML = profileData.tropes.map(t => `<span class="bg-purple-100 text-purple-800 text-xs font-medium px-2 py-0.5 rounded-full">${t}</span>`).join('');
            
            document.getElementById('preview-aesthetic').textContent = profileData.aesthetic || 'None selected';
            document.getElementById('preview-dealbreakers').textContent = profileData.dealbreakers || 'None entered';

            const platformsPreview = document.getElementById('preview-platforms');
            platformsPreview.innerHTML = '';
            profileData.platforms.forEach(p => {
                let iconClass = '';
                switch (p) {
                    case 'tiktok': iconClass = 'fab fa-tiktok'; break;
                    case 'instagram': iconClass = 'fab fa-instagram'; break;
                    case 'youtube': iconClass = 'fab fa-youtube'; break;
                    case 'newsletter': iconClass = 'fas fa-envelope'; break;
                    case 'blog': iconClass = 'fas fa-blog'; break;
                }
                const icon = document.createElement('i');
                icon.className = `${iconClass} text-xl text-gray-500`;
                platformsPreview.appendChild(icon);
            });
        }

        // Image preview logic
        function previewImage(event) {
            const [file] = event.target.files;
            const preview = document.getElementById('profile-pic-preview');
            const icon = document.getElementById('profile-pic-icon');
            if (file) {
                preview.src = URL.createObjectURL(file);
                preview.classList.remove('hidden');
                icon.classList.add('hidden');
                updatePreview();
            }
        }
        
        // Tag selection logic
        function toggleTag(element, type) {
            element.classList.toggle('bg-blue-100');
            element.classList.toggle('text-blue-800');
            element.classList.toggle('bg-gray-200');
            element.classList.toggle('text-gray-700');
            updatePreview();
        }

        // Aesthetic selection logic
        function selectAesthetic(element, aesthetic) {
            document.querySelectorAll('.aesthetic-option').forEach(el => el.classList.remove('selected'));
            element.classList.add('selected');
            element.dataset.aesthetic = aesthetic;
            updatePreview();
        }

        // Navigation
        nextBtn.addEventListener('click', () => {
            if (currentStep < totalSteps) {
                currentStep++;
                updateView();
            }
        });

        backBtn.addEventListener('click', () => {
            if (currentStep > 1) {
                currentStep--;
                updateView();
            }
        });

        // Initialize view
        document.addEventListener('DOMContentLoaded', () => {
            updateView();
            updatePreview();
        });
    </script>
</body>
</html>
